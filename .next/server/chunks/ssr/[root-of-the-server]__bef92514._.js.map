{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { z } from 'zod';\nimport { Resend } from 'resend';\nimport { google } from 'googleapis';\nimport { GoogleAuth } from 'google-auth-library';\n\n// Initialize resend only if the API key is available\nconst resend = process.env.RESEND_API_KEY ? new Resend(process.env.RESEND_API_KEY) : null;\n\nconst contactFormSchema = z.object({\n  name: z.string().min(2, 'El nombre debe tener al menos 2 caracteres.'),\n  email: z.string().email('Por favor, introduce un correo electrónico válido.'),\n  message: z.string().min(10, 'El mensaje debe tener al menos 10 caracteres.'),\n});\n\nconst registrationFormSchema = z.object({\n  name: z.string().min(2, 'El nombre debe tener al menos 2 caracteres.'),\n  email: z.string().email('Por favor, introduce un correo electrónico válido.'),\n});\n\n\nexport async function sendContactMessage(formData: {\n  name: string;\n  email: string;\n  message: string;\n}) {\n  const parsed = contactFormSchema.safeParse(formData);\n\n  if (!parsed.success) {\n    const errorMessages = parsed.error.issues.map(issue => issue.message).join(', ');\n    return { success: false, error: errorMessages };\n  }\n\n  if (!resend) {\n    console.error('Resend API key is not configured.');\n    return { success: false, error: 'La función de envío de correo no está configurada.' };\n  }\n\n  const { name, email, message } = parsed.data;\n\n  try {\n    await resend.emails.send({\n      from: 'onboarding@resend.dev',\n      to: 'luxtortrab25@gmail.com',\n      subject: `Nuevo mensaje de contacto de ${name}`,\n      html: `\n        <p><strong>Nombre:</strong> ${name}</p>\n        <p><strong>Email:</strong> ${email}</p>\n        <p><strong>Mensaje:</strong></p>\n        <p>${message}</p>\n      `,\n    });\n    return { success: true };\n  } catch (error) {\n    console.error('Error sending email:', error);\n    return { success: false, error: 'Hubo un problema al enviar tu mensaje. Por favor, intenta de nuevo.' };\n  }\n}\n\nasync function writeToGoogleSheet(data: { name: string; email: string }) {\n  try {\n    // Estas son las credenciales que DEBES configurar en tu entorno.\n    // NO LAS PEGUES DIRECTAMENTE AQUÍ.\n    const credentials = {\n      client_email: process.env.GOOGLE_CLIENT_EMAIL,\n      private_key: process.env.GOOGLE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n'), // Reemplaza \\\\n con saltos de línea\n    };\n\n    if (!credentials.client_email || !credentials.private_key) {\n      console.error('Google Sheets API credentials are not set in environment variables.');\n      throw new Error('La integración con Google Sheets no está configurada.');\n    }\n\n    const auth = new GoogleAuth({\n      credentials,\n      scopes: ['https://www.googleapis.com/auth/spreadsheets'],\n    });\n\n    const sheets = google.sheets({ version: 'v4', auth });\n\n    const spreadsheetId = '1_uzAsjwMmDRnevX1LXXHX0GesQzb8teGnVh6A762dXw';\n    const range = 'Sheet1!A:C'; // Asume que escribirás en las columnas A, B, C\n\n    const valueInputOption = 'USER_ENTERED';\n\n    const timestamp = new Date().toLocaleString('es-MX', { timeZone: 'America/Mexico_City' });\n\n    const resource = {\n      values: [[data.name, data.email, timestamp]],\n    };\n\n    await sheets.spreadsheets.values.append({\n      spreadsheetId,\n      range,\n      valueInputOption,\n      requestBody: resource,\n    });\n\n    return { success: true };\n  } catch (error) {\n    console.error('Error writing to Google Sheet:', error);\n    // Devuelve un objeto de error que el cliente pueda entender\n    return { success: false, error: 'No se pudo guardar en la hoja de cálculo.' };\n  }\n}\n\nexport async function registerUser(formData: { name: string; email: string }) {\n  const parsed = registrationFormSchema.safeParse(formData);\n\n  if (!parsed.success) {\n    const errorMessages = parsed.error.issues.map(issue => issue.message).join(', ');\n    return { success: false, error: errorMessages };\n  }\n\n  const { name, email } = parsed.data;\n\n  // Llama a la función para escribir en la hoja de cálculo\n  const result = await writeToGoogleSheet({ name, email });\n  \n  return result;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {registerUser as '40e1ee62ae4dc45a482fea8cf169c871adcac22dce'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","debugId":null}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgQ,GAC7R,8BACA","debugId":null}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}